# Running

```
git clone https://github.com/rweigel/cdaweb-hapi.git
cd cdaweb-hapi
make hapi-bw
```

# Notes

## Issues with reproducing Nand's metadata

Generation of HAPI metadata based on the method in `hapi-bw.py` produces more datasets than that produced by `hapi-nl.py`. The reason is Nand's server drops certain datasets when an "Expected unix time variable not found" error is encountered, e.g.,

```
java.lang.Throwable: Expected unix time variable not found for alt_10Hz
```

is encountered (see log/hapi-nl.log for additional logging information). It is not clear why this error occurs. The error message is generated by [TimeVariableFactory.java](https://github.com/autoplot/cdfj/blob/master/src/main/java/gov/nasa/gsfc/spdf/cdfj/TimeVariableFactory.java) (search for `unix time`), which is called by [CdawebInventoryEntry.java](https://git.smce.nasa.gov/spdf/hapi-nand/-/blob/main/src/java/org/hapistream/hapi/server/cdaweb/CdawebInventoryEntry.java) (search for `t.getMessage()`).


**Scripts**

```
python all-resolve.py     # creates data/all-resolve.json containing master CDF and SPASE (if available) as JSON
python all-restructure.py # creates data/all-restructure.json using data/all-resolve.json
python hapi-bw.py         # creates data/hapi-bw.json using data/all-resolve.json
python hapi-nl.py         # creates data/hapi-nl.json using https://cdaweb.gsfc.nasa.gov/hapi/{catalog,info}
```

# TODO:

* Write one file per HAPI dataset

# Visualize/Compare

See `table/README.md` for visualizing/comparing results.
